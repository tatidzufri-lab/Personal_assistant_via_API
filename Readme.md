# Персональный помощник через API

## О проекте

Этот проект представляет собой Telegram-бота — универсального персонального помощника, который работает через различные сервисы искусственного интеллекта. Бот может выполнять разные задачи в зависимости от настроек: создавать контент, генерировать тексты, помогать с написанием постов или карточек товаров. Проект демонстрирует, как интегрировать разные AI-сервисы в Telegram-бота.

## Задача и решение

**Проблема:** Работа с искусственным интеллектом через веб-интерфейсы не всегда удобна. Нужно открывать браузер, переходить на сайты, копировать и вставлять тексты. Кроме того, разные AI-сервисы имеют разные интерфейсы и возможности, что усложняет работу с ними.

**Решение:** Проект создаёт единую точку доступа к различным AI-сервисам прямо в Telegram. Вы можете общаться с искусственным интеллектом так же просто, как переписываетесь с другом. Бот работает с несколькими популярными AI-сервисами: OpenAI, GigaChat, и может быть настроен для выполнения различных задач — от создания постов для социальных сетей до генерации карточек товаров для маркетплейсов.

## Как это работает

Бот работает по простому принципу:

1. Вы запускаете бота в Telegram командой `/start` и получаете приветственное сообщение.

2. Вы отправляете боту любое сообщение с вашим запросом. Это может быть просьба написать пост, создать описание товара, ответить на вопрос или выполнить другую задачу.

3. Бот отправляет ваш запрос в выбранный сервис искусственного интеллекта. В проекте реализованы три варианта работы:
   - Через OpenAI Assistant API — для задач, требующих сохранения контекста разговора
   - Через GigaChat — российский AI-сервис с возможностью загрузки дополнительных инструкций
   - Через OpenAI Responses API — для быстрых запросов без сохранения истории

4. Искусственный интеллект обрабатывает ваш запрос согласно настроенным инструкциям. Например, если бот настроен на создание карточек товаров, он сгенерирует структурированную карточку. Если настроен на создание постов — напишет пост для социальной сети.

5. Бот получает ответ от AI и отправляет его вам в Telegram.

6. Вы можете продолжать диалог, уточнять детали или просить изменить результат. Бот помнит контекст разговора (в зависимости от используемого API), поэтому может учитывать предыдущие сообщения.

## Результат работы

В результате работы бота вы получаете:

- **Удобный доступ к AI** — общайтесь с искусственным интеллектом прямо в Telegram, не открывая браузер
- **Готовый контент** — тексты, посты, описания или другие материалы, сгенерированные AI согласно вашим требованиям
- **Гибкость** — возможность выбрать подходящий AI-сервис в зависимости от задачи
- **Сохранение контекста** — бот помнит историю разговора, что позволяет вести осмысленный диалог
- **Быстрые ответы** — получение результатов за несколько секунд без необходимости переключаться между приложениями

Конкретный результат зависит от того, какая версия бота запущена и какие инструкции настроены для AI. Например, если бот настроен на создание карточек товаров, вы получите структурированную карточку с названием, описанием, преимуществами и характеристиками. Если настроен на создание постов — получите готовый пост для публикации.

## Стек технологий

Проект использует следующие технологии и инструменты:

**Python** — основной язык программирования, на котором написан весь проект. Python выбран потому, что у него есть удобные и надёжные библиотеки для работы с Telegram и различными API искусственного интеллекта.

**python-telegram-bot** — библиотека для создания и управления Telegram-ботом. Она позволяет боту получать сообщения от пользователей, отправлять ответы, обрабатывать команды и управлять диалогами. Это одна из самых популярных библиотек для создания Telegram-ботов на Python.

**OpenAI API** — сервис для работы с искусственным интеллектом от компании OpenAI. В проекте используется в двух вариантах:
- **Assistant API** — для сложных задач, требующих сохранения контекста разговора и работы с потоками сообщений. Позволяет создавать ассистентов с собственными инструкциями.
- **Responses API** — для простых и быстрых запросов без необходимости сохранять историю. Подходит для одноразовых задач.

**GigaChat API** — российский сервис искусственного интеллекта от компании Сбера. Используется как альтернатива OpenAI для тех, кто предпочитает работать с российскими решениями. GigaChat поддерживает загрузку файлов с инструкциями, что позволяет настраивать поведение модели под конкретные задачи.

**LangChain** — библиотека для работы с различными моделями искусственного интеллекта. Она упрощает подключение к разным AI-сервисам, позволяет легко переключаться между ними и стандартизирует работу с ними. В проекте LangChain используется для работы с GigaChat, что делает код более универсальным и поддерживаемым.

**python-dotenv** — библиотека для загрузки конфигурационных данных из файла `.env`. Она позволяет безопасно хранить ключи доступа к API, токены и другие секретные данные в отдельном файле, не включая их в основной код. Это важный инструмент для безопасности проекта.

**logging** — встроенный модуль Python для записи событий и ошибок в процессе работы приложения. Используется для отслеживания работы бота, диагностики проблем и понимания, что происходит внутри системы. Это помогает находить и исправлять ошибки.

## Структура проекта

Проект состоит из нескольких основных файлов, каждый из которых представляет собой отдельную версию бота:

- **main_open_ai.py** — версия бота, которая работает с OpenAI Assistant API. Эта версия сохраняет историю разговора для каждого пользователя в отдельных потоках, что позволяет вести диалог с полным контекстом. Задача, которую выполняет бот, зависит от настроек ассистента в OpenAI.

- **main_giga.py** — версия бота, которая работает с GigaChat через библиотеку LangChain. Эта версия может использовать предзагруженные файлы с инструкциями (например, PDF с правилами создания карточек товаров) для более точной генерации контента. В текущей реализации настроена на создание карточек товаров для маркетплейсов.

- **main_lang.py** — версия бота, которая работает с OpenAI через Responses API. Это упрощённая версия для быстрых запросов без сохранения контекста. В текущей реализации также настроена на создание карточек товаров для маркетплейсов.

- **my_project.py** — кастомная версия бота с индивидуальными настройками. В текущей реализации настроена на создание постов для социальной сети VK.

- **src.py** — файл для загрузки конфигурации. Он читает ключи доступа, токены и другие настройки из файла `.env` и делает их доступными для других частей программы. Это централизованное место для управления конфигурацией проекта.

## Настройка и запуск

Перед запуском бота необходимо создать файл `.env` в корне проекта. Этот файл должен содержать все необходимые ключи доступа и токены:

- `OPENAI_API_KEY` — ключ для доступа к API OpenAI (необходим для версий с OpenAI)
- `ASSISTANT_ID` — идентификатор ассистента OpenAI (необходим для `main_open_ai.py` и `my_project.py`)
- `TELEGRAM_TOKEN` — токен вашего Telegram-бота, полученный от @BotFather (необходим для всех версий)
- `GIGACHAT_CREDENTIALS` — учётные данные для доступа к GigaChat (необходим для `main_giga.py`)

Файл `.env` — это обычный текстовый файл, где каждая строка содержит название переменной и её значение, разделённые знаком равенства. Например: `TELEGRAM_TOKEN=ваш_токен_здесь`.

**Важно:** Файл `.env` содержит секретную информацию (ключи доступа и токены), поэтому его ни в коем случае не следует добавлять в систему контроля версий (Git). Рекомендуется добавить `.env` в файл `.gitignore`, чтобы случайно не опубликовать свои ключи доступа в публичный репозиторий.

После создания файла `.env` можно запустить любую из версий бота, выполнив соответствующий Python-файл. Бот начнёт работать и будет отвечать на сообщения в Telegram. Каждая версия бота может быть настроена на выполнение разных задач в зависимости от инструкций, переданных AI-сервису.
